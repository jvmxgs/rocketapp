!function(e){var t={};function i(s){if(t[s])return t[s].exports;var r=t[s]={i:s,l:!1,exports:{}};return e[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(s,r,function(t){return e[t]}.bind(null,r));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=1)}([function(e,t){e.exports={width:720,height:1280,heightWorld:6e4,type:Phaser.AUTO,parent:"rocketGame",scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH},backgroundColor:"#87ceeb",physics:{default:"matter",matter:{gravity:{y:9.8},debug:!0}}}},function(e,t,i){"use strict";i.r(t);class s{constructor(){let e=i(0);this.width=e.width,this.height=e.height}getRelativePositionX(e){return this.width*(e/100)}getRelativePositionY(e){return this.height*(e/100)}}class r{constructor(e){this.scene=e,this.cursors=e.input.keyboard.createCursorKeys()}chechWhatHalf(){let e=new s;this.firstHalf=this.scene.input.pointer1.x<e.getRelativePositionX(50)}keyLeft(){return Phaser.Input.Keyboard.JustDown(this.cursors.left)}keyRight(){return Phaser.Input.Keyboard.JustDown(this.cursors.right)}touchedDown(){return this.chechWhatHalf(),this.scene.input.pointer1.justDown}}class a{constructor(e){this.fuel=e.add.image(53,0,"fuel"),this.fuelindicator=e.add.image(10,10,"fuelindicator"),this.fuel.y=this.fuelindicator.height/2+10,this.fuel.setOrigin(0,.5),this.fuelindicator.setOrigin(0),this.fuel.setScrollFactor(0),this.fuelindicator.setScrollFactor(0),this.decrease=0}decreaseFuel(){this.fuel.frame.cutY=0,this.fuel.frame.cutX=this.decrease,this.fuel.frame.cutHeight=this.fuel.height,this.fuel.frame.cutWidth=this.fuel.width-this.decrease,this.fuel.frame.updateUVs(),this.decrease<this.fuel.width&&(this.decrease+=1)}thereAreFuel(){return!(this.fuel.width-this.decrease<=0)}}class n{constructor(e,t,i){this.scene=e,this.isFlying=!0,this.velocity=20;var s=e.cache.json.get("rocketShape");this.sprite=e.matter.add.sprite(0,0,"rocket",0,{shape:s.rocket}),this.tailfire=e.matter.add.sprite(0,0,"tailfire",1).setOrigin(0),this.sprite.setFixedRotation().setDepth(3).setPosition(t,i),this.tailfire.setExistingBody(this.sprite.body.parts[1]).setFixedRotation().setDepth(2).setPosition(this.sprite.body.parts[1].position.x,this.sprite.body.parts[1].position.y),this.moveAngle=0,this.createAnimations(e),this.tailfire.anims.load("tailfiring"),this.tailfire.anims.play("tailfiring"),this.sprite.anims.load("rollingleft"),this.tankfuel=new a(e),this.controls=new r(e)}createAnimations(e){e.anims.create({key:"tailfiring",frames:e.anims.generateFrameNumbers("tailfire",{start:1,end:2}),frameRate:25,yoyo:!0,repeat:-1}),e.anims.create({key:"rollingleft",frames:e.anims.generateFrameNumbers("rocket",{frames:[0,1,2]}),frameRate:15,yoyo:!0}),e.anims.create({key:"rollingright",frames:e.anims.generateFrameNumbers("rocket",{frames:[0,3,4]}),frameRate:15,yoyo:!0})}turnOnEngine(){this.tankfuel.thereAreFuel()?(this.isFlying=!0,this.sprite.setVelocityY(Math.sin(this.sprite.body.angle-Math.PI/2)*this.velocity),this.sprite.setVelocityX(Math.cos(this.sprite.body.angle-Math.PI/2)*this.velocity)):(this.isFlying=!1,this.scene.cameras.main.stopFollow(),this.tailfire.anims.stop(),this.tailfire.setFrame(0),this.sprite.body.inertia=20000.1,this.sprite.applyForce({x:0,y:-.5}),this.sprite.setAngularVelocity(Phaser.Math.Between(-10,10)/100),this.scene.panelfinal.show())}moveToSide(e){this.sprite.angle<30&&this.sprite.angle>-30&&(this.moveAngle=e)}updateAngle(){0!=this.moveAngle?this.moveAngle>0?(this.sprite.angle+=1,this.moveAngle-=1,this.sprite.applyForce({x:.03,y:0})):(this.sprite.angle-=1,this.moveAngle+=1,this.sprite.applyForce({x:-.03,y:0})):this.sprite.angle>2?this.sprite.angle-=2:this.sprite.angle<-2?this.sprite.angle+=2:this.sprite.angle=0}update(e){this.isFlying&&(this.turnOnEngine(),(this.controls.keyLeft()||this.controls.touchedDown()&&this.controls.firstHalf)&&(this.moveToSide(-20),this.sprite.anims.play("rollingleft")),(this.controls.keyRight()||this.controls.touchedDown()&&!this.controls.firstHalf)&&(this.moveToSide(20),this.sprite.anims.play("rollingright")),this.updateAngle(),this.tankfuel.decreaseFuel())}}class o{constructor(e,t,i,s){this.camera=e.cameras.main,this.camera.startFollow(s),this.camera.setBounds(0,0,t,i),this.camera.setRoundPixels(!0),this.yOffset=0}fixYOffset(){this.yOffset<300&&(this.yOffset+=3,this.camera.setFollowOffset(0,this.yOffset))}update(){this.fixYOffset()}}class h extends Phaser.GameObjects.Container{constructor(e,t,i){super(e,t,i),this.scene=e,this.scene.add.existing(this),this.panelf=this.scene.add.image(0,0,"panelfinal"),this.add([this.panelf]),this.setScrollFactor(0)}show(){this.scene.tweens.add({targets:this,duration:600,ease:"Circ.easeInOut",y:700})}}class l extends Phaser.Physics.Matter.Sprite{constructor(e,t,i){super(e.matter.world,t,i,"coin"),e.add.existing(this),this.scene=e,this.setIgnoreGravity(!0),this.body.label="coin"}dissapear(e,t){let i=new s;this.body.destroy(),this.setScrollFactor(0),this.setPosition(this.body.position.x,900),this.scene.tweens.add({targets:this,duration:600,ease:"Bounce.Out",x:i.getRelativePositionX(95),y:i.getRelativePositionY(2)})}}class c extends Phaser.GameObjects.Group{constructor(e){super(e),this.createCallback=this.habemusCoin}habemusCoin(){this.playAnimation("coinFlip")}addCoin(e,t,i){var s=new l(e,t,i);this.add(s)}}class d extends Phaser.Scene{constructor(){super({key:"mainScene"})}create(){var e,t=i(0);this.matter.world.setBounds(0,0,t.width,t.heightWorld),this.rocket=new n(this,t.width/2,t.heightWorld),this.camera=new o(this,t.width,t.heightWorld,this.rocket.sprite),this.panelfinal=new h(this,t.width/2,t.height/2-1500),this.coinsF=new c(this),this.ciclo=0,(e=this).anims.create({key:"coinFlip",frames:e.anims.generateFrameNumbers("coin",{start:0,end:5}),frameRate:10,repeat:-1}),function(e){e.matter.world.on("collisionstart",function(e,t,i){"rocket"==t.label&&"coin"==i.label&&i.gameObject.dissapear()})}(this)}update(){this.ciclo++,this.ciclo>40&&(this.coinsF.addCoin(this,300,this.rocket.sprite.body.position.y-800),this.ciclo=0),this.camera.update(),this.rocket.update(this)}}class u extends Phaser.GameObjects.Sprite{constructor(e,t,i,s,r){super(e,t,i,s,r),e.add.existing(this),this.makeInteractive()}makeInteractive(){this.setInteractive(),this.on("pointerup",function(e){this.setFrame(1)}),this.on("pointerdown",function(e){this.setFrame(2),this.click()}),this.on("pointerover",function(e){this.setFrame(1)}),this.on("pointerout",function(e){this.setFrame(0)})}}class p extends Phaser.Scene{constructor(){super({key:"menuScene"})}create(){var e=new s;this.boton=new u(this,e.getRelativePositionX(50),e.getRelativePositionY(50),"buttonplay",0),this.boton.click=()=>{this.scene.add("mainScene",new d),this.scene.start("mainScene")}}}class f extends Phaser.Scene{constructor(){super({key:"Boot",active:!0})}preload(){var e=this.add.graphics(),t=this.add.graphics();t.fillStyle(2236962,.8),t.fillRect(10,200,220,50),this.load.on("progress",function(t){e.clear(),e.fillStyle(16777215,1),e.fillRect(20,210,200*t,30)}),this.load.on("fileprogress",function(e){}),this.load.on("complete",()=>{e.destroy(),t.destroy(),this.scene.start("menuScene")}),this.load.spritesheet("buttonplay","assets/sprites/buttonplay.png",{frameWidth:64,frameHeight:64,endFrame:3}),this.load.spritesheet("rocket","./assets/sprites/rocket.png",{frameWidth:80,frameHeight:160}),this.load.spritesheet("tailfire","./assets/sprites/tailfire.png",{frameWidth:32,frameHeight:64}),this.load.spritesheet("coin","./assets/sprites/coin.png",{frameWidth:60,frameHeight:60}),this.load.image("fuel","./assets/sprites/fuel.png"),this.load.image("fuelindicator","./assets/sprites/fuelindicator.png"),this.load.image("panelfinal","./assets/sprites/panelfinal.png"),this.load.image("piggy","./assets/sprites/piggy.png"),this.load.json("rocketShape","./assets/sprites/rocket.json")}}({initialize:function(){document.addEventListener("deviceready",this.onDeviceReady.bind(this),!1)},onDeviceReady:function(){var e=i(0);e.scene=[f,p],new Phaser.Game(e)}}).initialize()}]);